version: 2.1

setup: true
 
orbs:
  continuation: circleci/continuation@0.1.2

parameters:
  affected-app:
    default: "./check-affected"
    type: string

jobs:
  router:
    executor: continuation/default
    steps:
      - checkout
      - run: echo "Proxy routes to $(basename << pipeline.parameters.affected-app >>) pipeline"
      - continuation/continue:
          configuration_path: ".circleci/<< pipeline.parameters.affected-app >>.yml"

workflows:
  pipeline-proxy:
    jobs:
      - router